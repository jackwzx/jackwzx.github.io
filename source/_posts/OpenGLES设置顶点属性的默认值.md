---
title: OpenGLES设置顶点属性的默认值
date: 2024-07-28 16:53:57
tags:
---

在 OpenGL ES 中，设置顶点属性的默认值和通过顶点缓冲对象（VBO）上传顶点属性是两种不同的处理顶点属性的方法。以下是详细的解释：

### 设置顶点属性默认值

在 OpenGL ES 中，可以使用 `glVertexAttrib4f`（或其他类似的函数）来设置顶点属性的默认值。这些函数允许您为指定的顶点属性索引设置一个常量值，而不必为每个顶点提供一个值。例如：

```c
// 设置索引为 0 的顶点属性的默认值为 (1.0, 0.0, 0.0, 1.0)
glVertexAttrib4f(0, 1.0f, 0.0f, 0.0f, 1.0f);
```

请注意，这种方法直接在顶点着色器中使用常量值，因此适用于需要相同属性值的所有顶点的情况。

### 通过 VBO 上传顶点属性

VBO 是一种在图形硬件上存储顶点数据的高效方式。使用 VBO 可以提高渲染性能，因为数据存储在 GPU 内存中，而不是通过每次绘制调用从 CPU 内存传输数据。以下是使用 VBO 上传顶点属性的步骤：

1. **生成和绑定 VBO**：
   ```c
   GLuint vbo;
   glGenBuffers(1, &vbo);
   glBindBuffer(GL_ARRAY_BUFFER, vbo);
   ```

2. **上传顶点数据**：
   ```c
   GLfloat vertices[] = {
       // 顶点数据，假设每个顶点包含 3 个浮点数 (x, y, z)
       0.0f, 0.0f, 0.0f,
       1.0f, 0.0f, 0.0f,
       0.0f, 1.0f, 0.0f,
   };
   glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);
   ```

3. **设置顶点属性指针**：
   ```c
   glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 3 * sizeof(GLfloat), (void*)0);
   glEnableVertexAttribArray(0);
   ```

4. **绘制**：
   ```c
   glDrawArrays(GL_TRIANGLES, 0, 3);
   ```

### 性能差别

- **设置顶点属性默认值**：这种方法适用于所有顶点共享相同属性值的情况。其优点是简单直接，不需要额外的内存传输。然而，它缺乏灵活性，只能应用于特定的简单场景。

- **通过 VBO 上传顶点属性**：这种方法更为灵活，可以为每个顶点设置不同的属性值。因为数据存储在 GPU 内存中，所以渲染性能通常更高，特别是在处理大量顶点数据时。这种方法适用于大多数复杂的渲染任务。

总结来说，如果您的应用场景中所有顶点都共享相同的属性值，可以使用设置默认值的方法。如果不同顶点有不同的属性值，并且您希望获得更好的性能，应使用 VBO。
